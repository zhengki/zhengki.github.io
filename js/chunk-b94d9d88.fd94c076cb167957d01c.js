(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b94d9d88"],{"1b49":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"login-top"},[n("h3",[t._v("输入4位验证码")]),n("div",{staticClass:"tip"},[t._v("验证码已发送至 "+t._s(t.mobile))])]),n("div",{staticClass:"input-box"},[n("Verification",{on:{ok:t.onSubmit}})],1),t.time?n("div",{staticClass:"time"},[t._v(t._s(t.time)+"秒后重新获取")]):n("div",{staticClass:"time",on:{click:t.getCode}},[t._v("重新获取")])])},r=[],a=(n("ac1f"),n("5319"),n("96cf"),n("1da1")),o=n("365c"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex ac center"},t._l(t.length,(function(e,i){return n("van-field",{key:i,ref:"input"+i,refInFor:!0,staticClass:"custom-input",attrs:{name:"input"+i,type:t.type,maxlength:t.length-i,autofocus:!i},on:{input:function(e){return t.input(i,e)},focus:t.focus,keydown:function(e){return t.keydown(i,e)}},model:{value:t.valueArr[i],callback:function(e){t.$set(t.valueArr,i,e)},expression:"valueArr[index]"}})})),1)},s=[],u=(n("99af"),n("4de4"),n("a15b"),n("d81d"),n("fb6a"),n("a434"),n("a9e3"),n("1276"),n("be7f"),n("565f")),l=n("2b0e"),f=n("b047"),h=n.n(f);l["a"].use(u["a"]);var d={props:{length:{type:Number,default:4},type:{type:String,default:"tel"}},data:function(){return{value:""}},computed:{valueArr:{get:function(){var t=this.value||"";return t.split("")},set:function(t){this.value=t.join("")}}},watch:{valueArr:function(t){t.length===this.length&&this.debouncedGetAnswer()}},created:function(){this.debouncedGetAnswer=h()(this.ok,500)},methods:{focus:function(){if(this.value){var t=this.value.length;this.$refs["input".concat(t===this.length?this.length-1:t)][0].focus()}else this.$refs["input0"][0].focus()},input:function(t,e){var n=this.value;if(1===e.length)n+=e,n&&n.length>this.length&&(n=n.slice(0,this.length)),this.value=n,t<this.length-1&&this.$refs["input".concat(t+1)][0].focus();else{var i=this.valueArr.map((function(t){return t})).concat(e.split("")).join("").slice(0,this.length).split("").filter((function(t){return t}));this.valueArr=i,this.$refs["input".concat(i.length-1)][0].focus()}},keydown:function(t,e){var n=this;if(8===e.keyCode){var i=this.valueArr.map((function(t){return t}));i[t]?(i.splice(t,1),this.valueArr=i):t>0&&(i.splice(t-1,1),this.valueArr=i,this.$nextTick().then((function(){n.$refs["input".concat(t-1)][0].focus()})))}},ok:function(){this.$emit("ok",this.value)}}},v=d,p=(n("b202"),n("2877")),g=Object(p["a"])(v,c,s,!1,null,null,null),m=g.exports,b={components:{Verification:m},data:function(){return{mobile:"",focused:!1,time:60}},created:function(){var t=this.$route.query.mobile;this.mobile=t,this.getTime()},methods:{onSubmit:function(t){var e=this;if(t&&4===t.length){var n=this.$route.query.type;if("bind"===n){var i=JSON.parse(localStorage.getItem("wxInfo")),r=i.nickname,a=i.openid,c=i.unionid,s=i.headimgurl,u=i.sex,l={username:this.mobile,login_platform:"h5",verify_code:t,nickname:r,openid:a,unionid:c,header:s,sex:u};Object(o["b"])(l).then((function(t){if(t.success){var n=t.data;localStorage.setItem("token",n.token),localStorage.setItem("user_id",n.user_id),localStorage.setItem("userInfo",JSON.stringify(n)),e.$router.replace("/home")}}))}else{var f={username:this.mobile,login_platform:"h5",verify_code:t};Object(o["s"])(f).then((function(t){if(t.success){var n=t.data;localStorage.setItem("token",n.token),localStorage.setItem("user_id",n.user_id),localStorage.setItem("userInfo",JSON.stringify(n)),e.$router.replace("/home")}}))}}},getCode:function(){var t=this,e={mobile:this.mobile,scene:0};Object(o["q"])(e).then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.success&&t.getTime();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getTime:function(){var t=this;clearInterval(this.timer),this.time=60,this.timer=setInterval((function(){0!==t.time?t.time-=1:clearInterval(t.timer)}),1e3)}}},S=b,k=(n("8a86"),Object(p["a"])(S,i,r,!1,null,"7cdbddde",null));e["default"]=k.exports},"25ab":function(t,e,n){},"48f4":function(t,e,n){"use strict";function i(t,e){var n=e.to,i=e.url,r=e.replace;if(n&&t){var a=t[r?"replace":"push"](n);a&&a.catch&&a.catch((function(t){if(t&&"NavigationDuplicated"!==t.name)throw t}))}else i&&(r?location.replace(i):location.href=i)}function r(t){i(t.parent&&t.parent.$router,t.props)}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return a}));var a={url:String,replace:Boolean,to:[String,Object]}},5319:function(t,e,n){"use strict";var i=n("d784"),r=n("825a"),a=n("7b0b"),o=n("50c4"),c=n("a691"),s=n("1d80"),u=n("8aa5"),l=n("14c3"),f=Math.max,h=Math.min,d=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var m=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=i.REPLACE_KEEPS_$0,S=m?"$":"$0";return[function(n,i){var r=s(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!m&&b||"string"===typeof i&&-1===i.indexOf(S)){var a=n(e,t,this,i);if(a.done)return a.value}var s=r(t),d=String(this),v="function"===typeof i;v||(i=String(i));var p=s.global;if(p){var _=s.unicode;s.lastIndex=0}var $=[];while(1){var y=l(s,d);if(null===y)break;if($.push(y),!p)break;var A=String(y[0]);""===A&&(s.lastIndex=u(d,o(s.lastIndex),_))}for(var w="",I=0,x=0;x<$.length;x++){y=$[x];for(var C=String(y[0]),E=f(h(c(y.index),d.length),0),j=[],O=1;O<y.length;O++)j.push(g(y[O]));var T=y.groups;if(v){var N=[C].concat(j,E,d);void 0!==T&&N.push(T);var R=String(i.apply(void 0,N))}else R=k(C,d,E,j,T,i);E>=I&&(w+=d.slice(I,E)+R,I=E+C.length)}return w+d.slice(I)}];function k(t,n,i,r,o,c){var s=i+t.length,u=r.length,l=p;return void 0!==o&&(o=a(o),l=v),e.call(c,l,(function(e,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(s);case"<":c=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return e;if(l>u){var f=d(l/10);return 0===f?e:f<=u?void 0===r[f-1]?a.charAt(1):r[f-1]+a.charAt(1):e}c=r[l-1]}return void 0===c?"":c}))}}))},5760:function(t,e,n){},"8a86":function(t,e,n){"use strict";var i=n("5760"),r=n.n(i);r.a},a15b:function(t,e,n){"use strict";var i=n("23e7"),r=n("44ad"),a=n("fc6a"),o=n("a640"),c=[].join,s=r!=Object,u=o("join",",");i({target:"Array",proto:!0,forced:s||!u},{join:function(t){return c.call(a(this),void 0===t?",":t)}})},b202:function(t,e,n){"use strict";var i=n("25ab"),r=n.n(i);r.a},be7f:function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("1a04"),n("1146")},d81d:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").map,a=n("1dde"),o=n("ae40"),c=a("map"),s=o("map");i({target:"Array",proto:!0,forced:!c||!s},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-b94d9d88.fd94c076cb167957d01c.js.map